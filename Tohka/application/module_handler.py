from importlib.util import (
    spec_from_file_location,
    module_from_spec
)

# CHANGE AS NEEDED
FOLDERS: tuple[str,str,str] = (
    'system',
    'scripts',
    'guis'
)

    
def get_module(module_name: str, file_path: str): 
    """Find the module

    Args:
        module_name(str): Module name
        file_path(str): The file path for the module
    
    Returns:  
        Module(Unknown typing): Module code.

    """
    spec   = spec_from_file_location(module_name, file_path)

    module = module_from_spec(spec)
    spec.loader.exec_module(module)
    return module

        
def call_module(module: str, params: str | None = None) -> bool | None:
    """Call on the module requested

    Args:
        function(str): Module we are calling
        params(str | None): Parameters to pass to the module

    Returns:
        status of module(bool | None): Detect whether module 
                                       execution worked.
    """
    for folder in FOLDERS:
        try:
            mod = get_module(module, f"Tohka/modules/{folder}/{module}.py")
            mod.TohkaModule.main(params)
            return True
        except Exception as e:
            #print(e)
            continue
            
            
            
          
        
